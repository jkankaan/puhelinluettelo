(this.webpackJsonpkurssisovellus=this.webpackJsonpkurssisovellus||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),c=t(3),i=t(2),u=t(0),a=function(e){return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:e.filter,onChange:e.handle})]})},l=function(e){return Object(u.jsxs)("form",{onSubmit:e.nameandnumber,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newname,onChange:e.handlename})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newnumber,onChange:e.handlenumber})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){return Object(u.jsx)("div",{children:e.persons.map((function(n){return Object(u.jsxs)("div",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:function(){return e.delete_function(n.id,n.name)},children:"delete"})]},n.id)}))})},d=t(4),f=t.n(d),m="/api/persons",b={getAll:function(){return f.a.get(m)},create:function(e){return f.a.post(m,e)},deleteFunction:function(e){return f.a.delete("".concat(m,"/").concat(e))},modify:function(e,n){return f.a.put("".concat(m,"/").concat(e),n)}},j=function(){var e=Object(i.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(i.useState)(""),d=Object(c.a)(o,2),f=d[0],m=d[1],j=Object(i.useState)(""),h=Object(c.a)(j,2),p=h[0],g=h[1],O=Object(i.useState)(""),v=Object(c.a)(O,2),x=v[0],y=v[1],w=Object(i.useState)({msg:null,type:null}),k=Object(c.a)(w,2),S=k[0],C=k[1];Object(i.useEffect)((function(){b.getAll().then((function(e){r(e.data)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})),A=function(e){var n={fontStyle:"arial",fontSize:20,borderRadius:"5px",backgroundColor:"lightgrey",height:"40px",fontWeight:"bold",lineHeight:"40px",padding:"10px"};return"error"===e.message.type?n.color="red":n.color="green","error"===e.message.type?n.border="3px solid red":n.border="3px solid green",null===e.message.msg?null:Object(u.jsx)("div",{style:n,children:e.message.msg})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(A,{message:S}),Object(u.jsx)(a,{filter:x,handle:function(e){y(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(l,{nameandnumber:function(e){e.preventDefault();var n={name:f,number:p};if(t.find((function(e){return e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var o=t.filter((function(e){return e.name===f}))[0].id;b.modify(o,n).then((function(e){if(null===e.data)return C({msg:"Information of ".concat(f," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==o}))),void setTimeout((function(){C({msg:null,type:null})}),2e3);r(t.map((function(n){return n.id!==o?n:e.data}))),m(""),g(""),C({msg:"Phone number replaced",note:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3)})).catch((function(e){C({msg:"Information of ".concat(f," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==o}))),setTimeout((function(){C({msg:null,type:null})}),2e3)}))}}else b.create(n).then((function(e){r(t.concat(e.data)),m(""),g(""),C({msg:"Added ".concat(f),type:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3)})).catch((function(e){var n=e.response.data;n=n.error,C({msg:"".concat(n),type:"error"}),setTimeout((function(){C({msg:null,type:null})}),2e3)}))},newname:f,handlename:function(e){m(e.target.value)},newnumber:p,handlenumber:function(e){g(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{persons:T,delete_function:function(e,n){window.confirm("Delete "+n+" ?")&&(b.deleteFunction(e).then((function(e){return e.data})),b.getAll().then((function(n){r(t.filter((function(n){return n.id!==e})))})),C({msg:"Deleted ".concat(n),type:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3))}})]})};o.a.render(Object(u.jsx)(j,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0e65d8ee.chunk.js.map