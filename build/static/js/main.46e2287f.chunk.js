(this.webpackJsonpkurssisovellus=this.webpackJsonpkurssisovellus||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),i=t(3),o=t(2),u=t(0),a=function(e){return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:e.filter,onChange:e.handle})]})},l=function(e){return Object(u.jsxs)("form",{onSubmit:e.nameandnumber,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newname,onChange:e.handlename})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newnumber,onChange:e.handlenumber})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){return Object(u.jsx)("div",{children:e.persons.map((function(n){return Object(u.jsxs)("div",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:function(){return e.delete_function(n.id,n.name)},children:"delete"})]},n.id)}))})},d=t(4),f=t.n(d),b="/api/persons",m={getAll:function(){return f.a.get(b)},create:function(e){return f.a.post(b,e)},deleteFunction:function(e){return f.a.delete("".concat(b,"/").concat(e))},modify:function(e,n){return f.a.put("".concat(b,"/").concat(e),n)}},j=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),d=Object(i.a)(c,2),f=d[0],b=d[1],j=Object(o.useState)(""),h=Object(i.a)(j,2),p=h[0],g=h[1],O=Object(o.useState)(""),x=Object(i.a)(O,2),v=x[0],y=x[1],w=Object(o.useState)({msg:null,type:null}),k=Object(i.a)(w,2),S=k[0],C=k[1];Object(o.useEffect)((function(){m.getAll().then((function(e){r(e.data)}))}),[]);var A=t.filter((function(e){return e.name.toLowerCase().includes(v.toLowerCase())})),T=function(e){var n={fontStyle:"arial",fontSize:25,borderRadius:"5px",backgroundColor:"lightgrey",height:"50px",fontWeight:"bold",lineHeight:"50px",padding:"10px"};return"error"===e.message.type?n.color="red":n.color="green","error"===e.message.type?n.border="3px solid red":n.border="3px solid green",null===e.message.msg?null:Object(u.jsx)("div",{style:n,children:e.message.msg})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(T,{message:S}),Object(u.jsx)(a,{filter:v,handle:function(e){y(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(l,{nameandnumber:function(e){e.preventDefault();var n={name:f,number:p};if(t.find((function(e){return e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var c=t.filter((function(e){return e.name===f}))[0].id;m.modify(c,n).then((function(e){r(t.map((function(n){return n.id!==c?n:e.data}))),b(""),g(""),C({msg:"Phone number replaced",note:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3)})).catch((function(e){C({msg:"Information of ".concat(f," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==c}))),setTimeout((function(){C({msg:null,type:null})}),2e3)}))}}else m.create(n).then((function(e){r(t.concat(e.data)),b(""),g(""),C({msg:"Added ".concat(f),type:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3)}))},newname:f,handlename:function(e){b(e.target.value)},newnumber:p,handlenumber:function(e){g(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{persons:A,delete_function:function(e,n){window.confirm("Delete "+n+" ?")&&(m.deleteFunction(e).then((function(e){return e.data})),m.getAll().then((function(n){r(t.filter((function(n){return n.id!==e})))})),C({msg:"Deleted ".concat(n),type:"notification"}),setTimeout((function(){C({msg:null,type:null})}),2e3))}})]})};c.a.render(Object(u.jsx)(j,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.46e2287f.chunk.js.map